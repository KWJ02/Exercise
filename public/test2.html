<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BMI 막대 그래프</title>
<style>
    /* 스타일링 */
    .range-container {
        width: 80%;
        border: 1px solid #ccc;
        padding: 10px;
        margin: 20px auto;
        text-align: center;
    }

    .bar {
        width: 100%;
        height: 20px;
        position: relative;
        margin-top: 10px;
    }

    .arrow {
        position: absolute;
        top: -20px;
        left: calc(100% / 50 * 30 - 10px); /* BMI 값에 따라 위치를 조정합니다. */
        width: 0;
        height: 0;
        border-left: 10px solid transparent;
        border-right: 10px solid transparent;
        border-top: 10px solid red; /* 화살표의 색상을 지정합니다. */
    }

    .progress {
        height: 100%;
        position: absolute;
        top: 0;
        left: calc(100% / 50 * 30); /* BMI 값에 따라 위치를 조정합니다. */
        width: 2px; /* 화살표가 위치하는 가운데 선의 너비를 지정합니다. */
        background-color: black; /* 화살표가 위치하는 가운데 선의 색상을 지정합니다. */
    }

    .range-values {
        display: flex;
        justify-content: start;
        font-size: 12px;
        color: #777;
        margin-top: 5px;
    }

    .range-blue {
        background-color: blue;
        width: 37%; /* 0 ~ 18.5까지 */
        float: left;
        height: 100%;
    }

    .range-green {
        background-color: green;
        width: 9.23%; /* 18.5 ~ 23까지 */
        float: left;
        height: 100%;
    }

    .range-orange {
        background-color: orange;
        width: 4%; /* 23 ~ 25까지 */
        float: left;
        height: 100%;
    }

    .range-red {
        background-color: red;
        width: 48%;
        float: left;
        height: 100%;
    }
</style>
</head>
<body>

  <div class="range-container">
    <h3>BMI 막대 그래프</h3>
    <p>BMI 값: <span id="bmiValue">30</span></p>
    <div class="bar">
      <div class="arrow"></div> 
      <div class="range-blue"></div>
      <div class="range-green"></div>
      <div class="range-orange"></div>
      <div class="range-red"></div>
      <div class="progress"></div> <!-- BMI 값을 표시할 화살표 -->
    </div>
    <div class="range-values">
      <span>0</span>
      <span style="margin-left : 35.5%;">18.5</span>
      <span style="margin-left : 7.8%;">23</span>
      <span style="margin-left : 2.5%;">25</span>
    </div>
  </div>

<script>
    document.addEventListener("DOMContentLoaded", function() {
    // BMI 값을 받아옵니다. 이 예제에서는 임의의 수치로 대체합니다.
    let bmiValue = 49;
    
    // BMI 값을 표시할 요소를 가져옵니다.
    const bmiValueElement = document.getElementById("bmiValue");
    
    // BMI 값을 표시합니다.
    bmiValueElement.textContent = bmiValue;

    // BMI 값에 따라 화살표와 프로그레스 바의 위치를 조정합니다.
    const arrowElement = document.querySelector(".arrow");
    const progressBarElement = document.querySelector(".progress");
    const barWidth = document.querySelector(".bar").offsetWidth; // 막대 그래프의 너비를 가져옵니다.
    const arrowPosition = (barWidth / 50) * bmiValue - 10; // BMI 값을 퍼센트로 변환하여 화살표의 위치를 계산합니다.
    if(bmiValue >= 49){
      arrowElement.style.left = '1144.44px';
      progressBarElement.style.left = '1155px';
    } else {
      arrowElement.style.left = `${arrowPosition}px`; // 화살표의 위치를 설정합니다.
      progressBarElement.style.left = `${((barWidth / 50) * bmiValue)}px`; // 프로그레스 바의 위치를 설정합니다.
    }
  });
</script>

</body>
</html>
